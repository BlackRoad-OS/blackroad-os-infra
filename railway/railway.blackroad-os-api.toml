# Railway Service Configuration: blackroad-os-api

[service]
name = "blackroad-os-api"
description = "Public API proxy service for BlackRoad OS"

[build]
builder = "NIXPACKS"
buildCommand = "npm ci && npm run build"

[deploy]
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[healthcheck]
path = "/health"
interval = 30
timeout = 5

[network]
# Port is set via $PORT environment variable by Railway
# Default: 8080

# Environment-specific configuration
# Actual values are set in Railway dashboard, not here

[env]
# Required - set in Railway dashboard
# BR_OS_ENV = "staging" or "prod"
# BR_OS_API_VERSION = "0.1.0"
# BR_OS_API_COMMIT = "$RAILWAY_GIT_COMMIT_SHA"
# NODE_ENV = "production"
# PORT = "$PORT"

# Service dependencies - set in Railway dashboard
# CORE_BASE_URL = "https://blackroad-os-core-{env}.railway.app"
# CORE_API_KEY = "[SECRET - stored in Railway]"

# Optional - set in Railway dashboard if needed
# LOG_LEVEL = "info"
# REQUEST_TIMEOUT_MS = "30000"
# RATE_LIMIT_MAX = "100"
# RATE_LIMIT_WINDOW_MS = "60000"

[resources]
# Staging: 0.5 vCPU, 512MB
# Production: 1 vCPU, 1GB
# Set in Railway dashboard

[scaling]
# Staging: 1 instance
# Production: 2+ instances with autoscaling
# Configure in Railway dashboard
